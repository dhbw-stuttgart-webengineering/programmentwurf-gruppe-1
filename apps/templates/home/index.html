{% extends "layouts/base-fullscreen.html" %} 
{% block title %} Home {%endblock title %} 
{% block content %}

<div class="container">
  {% if request.user.is_authenticated %}
  <p>Willkommen, {{ request.user.name }}!</p>
  {% else %}
  <p>Du bist nicht eingeloggt!</p>
  {% endif %} {% if perms.is_superuser %}
  <p>Du bist ein Admin.</p>
  {% else %}
  <p>Du bist kein Admin.</p>
  {% endif %}

  <div class="chart-container">
    <div class="chart-box">
      <canvas id="comparechart"></canvas>
    </div>
    <div class="chart-box">
      <canvas id="misschart"></canvas>
    </div>
  </div>
</div>

<style>
	.chart-container {
	  display: flex;
	  justify-content: center;
	  align-items: center;
	  height: 100vh;
	  gap: 20px; /* Abstand zwischen den Boxen */
	}
  
	.chart-box {
	  border: 2px solid #ccc;
	  border-radius: 10px;
	  padding: 10px;
	  max-width: 500px;
	  width: 100%; /* Jede Box nimmt die gesamte verf端gbare Breite */
	}
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var ctx = document.getElementById('comparechart').getContext('2d');
    var myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Kurs A', 'Kurs B', 'Kurs C', 'Kurs D'],
        datasets: [{
          label: 'Durchschnittsnoten',
          data: [2.4, 1.9, 3.7, 2.1],
          backgroundColor: generateRandomColors(4),
          borderColor: 'rgba(75, 192, 192, 1)',
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: {
            beginAtZero: false, // Beginnt nicht bei 0
            min: 1, // Mindestwert f端r y-Achse
            max: 6, // Maximalwert f端r y-Achse
          }
        },
        plugins: {
          legend: {
            display: false
          },
          title: {
            display: true,
            text: 'Kursvergleich'
          }
        }
      }
    });

    function generateRandomColors(numColors) {
      var colors = [];
      for (let i = 0; i < numColors; i++) {
        var randomColor = 'rgba(' + Math.floor(Math.random() * 256) + ',' + Math.floor(Math.random() * 256) + ',' + Math.floor(Math.random() * 256) + ', 0.5)';
        colors.push(randomColor);
      }
      return colors;
    }
  });
</script>

<script>
	document.addEventListener("DOMContentLoaded", function () {
	  var ctx = document.getElementById("misschart").getContext("2d");
	  var myChart = new Chart(ctx, {
		type: "doughnut",
		data: {
		  labels: ["Durchgefallen", "Bestanden"],
		  datasets: [
			{
			  data: [0.6, 0.4],
			  backgroundColor: [
				"rgba(255, 99, 132, 0.5)",
				"rgba(75, 192, 192, 0.5)",
			  ],
			  borderColor: ["rgba(255,99,132,1)", "rgba(75, 192, 192, 1)"],
			  borderWidth: 1,
			},
		  ],
		},
		options: {
		  responsive: true,
		  plugins: {
			legend: {
			  position: "top",
			},
			title: {
			  display: true,
			  text: "Pr端fungsergebnisse",
			},
		  },
		},
	  });
	});
  </script>

{% endblock content %}
